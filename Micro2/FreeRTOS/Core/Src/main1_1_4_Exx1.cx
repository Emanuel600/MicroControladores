#include "init_from_hal.h"
#include <stdint.h>
#include "atraso.h"

xTaskHandle		vTask1_id;
xTaskHandle		vTask2_id;

//--------------------------------------------------------------------------------
static void vTask1(void *pvParameters)
{
	const char *pcTaskMsg[] = {"Task 1 is running.\n"};

	while(1)
	{
		printf(*pcTaskMsg);

		atraso_ms(200);

	}
	vTaskDelete(vTask1_id);   /* Nunca deve chegar aqui! Crash na pilha!? */
}
//--------------------------------------------------------------------------------
static void vTask2(void *pvParameters)
{
	const char *pcTaskMsg[] = {"Task 2 is running.\n"};

	while(1)
	{
		printf(*pcTaskMsg);

		atraso_ms(200);

	}
	vTaskDelete(vTask2_id);   /* Nunca deve chegar aqui! Crash na pilha!? */
}
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
int main(void)
{
	HAL_Init();

	SystemClock_Config();

	MX_GPIO_Init();

	MX_USART3_UART_Init();

	//RTOS

	xTaskCreate(vTask1, "Task 1", 100, NULL, 1, &vTask1_id);
	xTaskCreate(vTask2, "Task 2", 100, NULL, 1, &vTask2_id);

	vTaskStartScheduler();	// apos este comando o RTOS passa a executar as tarefas

	while (1);
}
//-------------------------------------------------------------------------------

